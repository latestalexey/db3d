<% if @tool.errors.any? %>
<div class="alert alert-danger" role="alert">
  <ul>
    <% @tool.errors.to_h.values.flatten.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>

<%= form_for @tool do |f| %>
  <%= f.label :name, 'Имя' %>
  <%= f.text_field :name, class: "form-control", autofocus: true %>
  <%= f.label :date, 'Дата' %>
  <%= f.text_field :date, class: "form-control",
    "data-provide"=> "datepicker", value: @tool.date2str %>
  <%= f.label :author, 'Разработал' %>
  <%= f.text_field :author, class: "form-control" %>
  <%= f.label :note, 'Примечание' %>
  <%= f.text_area :note, rows: 5, class: "form-control" %>
  <%= f.label :img, 'Загрузить чертёж' %>
  <%= f.file_field :img  %>
  <h2>Ключевые слова
    <button class='btn btn-xs' type='button' data-toggle="collapse" data-target="#tags-info">
      <i class='fa fa-question-circle'></i>
    </button>
  </h2>
  <div class='collapse' id='tags-info'>
    <div class='alert alert-info'>
      <ol>
        <li>Каждое ключевое слово вводится в отдельное поле ввода</li>
        <li>Для добавления ключевого слова нажмите кнопку "Добавить ключевое слово"</li>
        <li>Для удаления ключевого слова просто сотрите его в поле ввода</li>
      </ol>
    </div>
  </div>
  <div class='form-inline'>
    <% @tool.tags.pluck(:name).each do |tag| %>
    <%= f.text_field 'tags[]', value: tag, class: "form-control" %>
    <% end %>
    <%= f.text_field 'tags[]', value: nil, class: "form-control" %>
    <button class='btn btn-warning' type='button'>
      <i class='fa fa-plus'></i>
      Добавить ключевое слово
    </button>
    <%= javascript_tag "void #{JSON.pretty_generate Tag.order(1).pluck :name}" %>
  </div>

  <br>

  <button type='submit' class='btn btn-primary'>
    <i class="fa fa-save"></i>
    <%= @tool.new_record? ? 'Создать' : 'Сохранить' %>
  </button>
<% end %>
